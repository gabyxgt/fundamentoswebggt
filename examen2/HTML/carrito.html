<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito - P√©talo Vivo</title>
    <link rel="icon" type="image/jpeg" href="../IMG/favicon.jpg">
    <link rel="stylesheet" href="../CSS/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
    <div class="site-wrapper">
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="../IMG/LOGO1.png" alt="P√©talo Vivo">
                </a>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li><a href="productos.html">Productos</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="galeria.html">Galer√≠a</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="carrito.html">üõí <span id="cart-count">0</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero-section">
            <div class="container">
                <h1>Tu Carrito de Compras</h1>
                <p>Revisa tus productos seleccionados antes de finalizar tu compra</p>
            </div>
        </section>

        <section class="cart-section">
            <div class="container">
                <div class="cart-content">
                    <div class="cart-items-section">
                        <h2>Productos en tu Carrito</h2>
                        <div id="cart-items" class="cart-items-container">
                        </div>
                        <div id="empty-cart" class="empty-cart" style="display: none; text-align: center; background: white; padding: 30px; border-radius: 10px;">
                            <p>Tu carrito est√° vac√≠o</p>
                            <img src="../IMG/gif.gif" alt="Carrito vac√≠o" style="width: 100px; height: 100px; margin: 20px 0; display: block; margin-left: auto; margin-right: auto;">
                            <a href="productos.html" class="btn-primary" style="margin-top: 20px;">Ver Productos</a>
                        </div>
                    </div>

                    <div class="cart-summary">
                        <h3>Resumen del Pedido</h3>
                        <div class="summary-line">
                            <span>Subtotal:</span>
                            <span id="subtotal">‚Ç°0</span>
                        </div>
                        <div class="summary-line">
                            <span>Env√≠o:</span>
                            <span id="shipping">‚Ç°2,500</span>
                        </div>
                        <div class="summary-line">
                            <span>IVA (13%):</span>
                            <span id="tax">‚Ç°0</span>
                        </div>
                        <hr>
                        <div class="summary-line total">
                            <span><strong>Total:</strong></span>
                            <span id="cart-total"><strong>‚Ç°0</strong></span>
                        </div>

                        <div class="shipping-options">
                            <h4>Opciones de Entrega</h4>
                            <label>
                                <input type="radio" name="shipping" value="pickup" onchange="updateShipping()">
                                Recoger en tienda (Gratis)
                            </label>
                            <label>
                                <input type="radio" name="shipping" value="delivery" checked onchange="updateShipping()">
                                Entrega a domicilio (‚Ç°2,500)
                            </label>
                        </div>

                        <button id="checkout-btn" class="btn-primary checkout-btn" onclick="continuarConPago()">
                            Proceder al Pago
                        </button>

                        <div class="payment-methods">
                            <h4>M√©todos de Pago Aceptados</h4>
                            <div class="payment-icons">
                                <span><img src="../ICONS/creditcard.png" alt="Tarjetas de Cr√©dito" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Tarjetas de Cr√©dito</span>
                                <span><img src="../ICONS/transferencia.png" alt="Transferencia" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Transferencia</span>
                                <span><img src="../ICONS/sinpe.png" alt="SINPE M√≥vil" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> SINPE M√≥vil</span>
                                <span><img src="../ICONS/cash.png" alt="Efectivo" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Efectivo (si recoge en tienda)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="cart-info">
            <div class="container">
                <div class="info-grid">
                    <div class="info-card">
                        <h3><img src="../ICONS/plant.png" alt="Env√≠o Gratis" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Env√≠o Gratis</h3>
                        <p>En compras mayores a ‚Ç°50,000 dentro del √°rea metropolitana</p>
                    </div>
                    <div class="info-card">
                        <h3><img src="../ICONS/plant.png" alt="Compra Segura" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Compra Segura</h3>
                        <p>Tus datos est√°n protegidos con encriptaci√≥n SSL</p>
                    </div>
                    <div class="info-card">
                        <h3><img src="../ICONS/plant.png" alt="Devoluciones" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Devoluciones</h3>
                        <p>30 d√≠as para devoluciones en plantas con garant√≠a</p>
                    </div>
                    <div class="info-card">
                        <h3><img src="../ICONS/plant.png" alt="Soporte" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> Soporte</h3>
                        <p>Atenci√≥n al cliente de lunes a s√°bado</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="recommended-section">
            <div class="container">
                <h2>Tambi√©n te Puede Interesar</h2>
                <div class="recommended-grid">
                    <div class="product-card">
                        <img src="../IMG/fertilizante.png" alt="Fertilizante">
                        <h4>Fertilizante Org√°nico</h4>
                        <p>‚Ç°4,500</p>
                        <button onclick="addToCart('fertilizante', 'Fertilizante Org√°nico', 4500)">Agregar</button>
                    </div>
                    <div class="product-card">
                        <img src="../IMG/macetabarro.png" alt="Maceta">
                        <h4>Maceta de Barro</h4>
                        <p>‚Ç°3,500</p>
                        <button onclick="addToCart('maceta', 'Maceta de Barro', 3500)">Agregar</button>
                    </div>
                    <div class="product-card">
                        <img src="../IMG/regadera.png" alt="Regadera">
                        <h4>Regadera de Metal</h4>
                        <p>‚Ç°8,000</p>
                        <button onclick="addToCart('regadera', 'Regadera de Metal', 8000)">Agregar</button>
                    </div>
                </div>
            </div>
        </section>
    </main>



    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>P√©talo Vivo</h3>
                    <p>Tu vivero de confianza en Costa Rica</p>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p><img src="../ICONS/pin.png" alt="Ubicaci√≥n" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> San Jos√©, Costa Rica</p>
                    <p><img src="../ICONS/phone.png" alt="Tel√©fono" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> +506 8338-8242</p>
                    <p><img src="../ICONS/email.png" alt="Email" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 5px;"> info@petalovivo.cr</p>
                </div>
                <div class="footer-section">
                    <h3>Suscr√≠bete</h3>
                    <form id="newsletter-form" class="newsletter-form">
                        <input type="email" id="newsletter-email" placeholder="Tu email" required>
                        <button type="submit">Suscribir</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 P√©talo Vivo. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>


    <a href="../PDF/Manual de usuario.pdf" target="_blank" class="manual-btn">
        Manual de Usuarioo
    </a>

    <script src="../JS/script.js"></script>
    <script>
        function updateShipping() {
            const shippingOption = document.querySelector('input[name="shipping"]:checked').value;
            const shippingElement = document.getElementById('shipping');
            const shippingCost = shippingOption === 'pickup' ? 0 : 2500;
            shippingElement.textContent = `‚Ç°${shippingCost.toLocaleString()}`;
            calculateTotal();
        }

        function calculateTotal() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shippingCost = document.querySelector('input[name="shipping"]:checked').value === 'pickup' ? 0 : 2500;
            const tax = Math.round(subtotal * 0.13);
            const total = subtotal + shippingCost + tax;

            document.getElementById('subtotal').textContent = `‚Ç°${subtotal.toLocaleString()}`;
            document.getElementById('tax').textContent = `‚Ç°${tax.toLocaleString()}`;
            document.getElementById('cart-total').innerHTML = `<strong>‚Ç°${total.toLocaleString()}</strong>`;
        }

        function continuarConPago() {
            if (cart.length === 0) {
                Swal.fire({
                    title: 'Carrito vac√≠o',
                    text: 'No tienes productos en tu carrito',
                    imageUrl: '../IMG/gif.gif',
                    imageWidth: 100,
                    imageHeight: 100,
                    timer: 2000,
                    showConfirmButton: false
                });
                return;
            }
            
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shippingCost = document.querySelector('input[name="shipping"]:checked').value === 'pickup' ? 0 : 2500;
            const tax = Math.round(subtotal * 0.13);
            const total = subtotal + shippingCost + tax;
            const metodoEnvio = document.querySelector('input[name="shipping"]:checked').value;
            
            localStorage.setItem('resumen_carrito', JSON.stringify(cart));
            localStorage.setItem('resumen_total', total);
            localStorage.setItem('resumen_envio', metodoEnvio);
            localStorage.setItem('resumen_pago', null);
            
            window.location.href = 'resumen-compra.html';
        }


        function displayCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const emptyCart = document.getElementById('empty-cart');
            
            if (!cartItemsContainer) return;
            
            if (cart.length === 0) {
                cartItemsContainer.style.display = 'none';
                emptyCart.style.display = 'block';
                return;
            }

            cartItemsContainer.style.display = 'block';
            emptyCart.style.display = 'none';
            cartItemsContainer.innerHTML = '';
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="item-info">
                        <h4>${item.name}</h4>
                        <p>‚Ç°${item.price.toLocaleString()} c/u</p>
                    </div>
                    <div class="item-controls">
                        <button onclick="updateQuantity('${item.id}', -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity('${item.id}', 1)">+</button>
                    </div>
                    <div class="item-total">
                        <span>‚Ç°${itemTotal.toLocaleString()}</span>
                        <button onclick="removeFromCart('${item.id}')" class="remove-btn">üóëÔ∏è</button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
            
            calculateTotal();
        }

        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    updateCartCount();
                    saveCart();
                    displayCartItems();
                }
            }
        }


    </script>
    </div>
</body>
</html>